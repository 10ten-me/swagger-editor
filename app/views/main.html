<header class="main-header">
  <h1>Swagger Editor</h1>
  <div class="toolbar generation">
    <label><input type="checkbox" ng-model="autogenDocs">Generate Docs on the fly</label>
    <button ng-show="!autogenDocs" ng-click="generateDocs()">Generate Docs</button>
  </div>
  <div class="panel-switcher toolbar">
    <a ng-click="switchPreviewMode('html')" ng-class="{active: previewMode == 'html'}">HTML</a>
    <a ng-click="switchPreviewMode('json')" ng-class="{active: previewMode == 'json'}">JSON</a>
  </div>
</header>
<main class="container">
  <div class="ace pane ace-editor" id="ace-editor-pane">
    <div class="editor-error-message" ng-show="!!editorErrorMessage.length">
      <pre>{{editorErrorMessage}}</pre>
    </div>
    <div class="editor-wrapper" ui-ace="{
      useWrapMode : true,
      theme:'merbivore_soft',
      mode: 'yaml',
      onLoad: aceLoaded,
      onChange: aceChanged
    }"></div>
  </div>
  <splitter-bar class="splitter pane" left-pane="ace-editor-pane" right-pane="preview-pane"></splitter-bar>
  <div class="preview pane" id="preview-pane">
    <div class="json-section" ng-show="previewMode == 'json'">
      <div class="editor-wrapper" readonly="true" ui-ace="{
        useWrapMode : true,
        theme:'dawn',
        mode: 'json',
        onLoad: jsonPreviewLoaded
      }"></div>
    </div>
    <div class="swagger-section" ng-show="previewMode == 'html'">
      <div id="swagger-ui-container" class="swagger-ui-wrap">
        <div class='container' id='resources_container'>
            <ul id='resources'>
              <li class="resource" ng-repeat="resource in swagger.apisArray" id="resource_{{resource.name}}">
                <div class='heading'>
                  <h2>
                    <a href='#/{{resource.id}}' ng-click="Docs.toggleEndpointListForResource('{{id}}');">{{resource.name}}</a>
                     : {{resource.description}}
                  </h2>
                  <ul class='options'>
                    <li>
                      <a href='#/{{resource.id}}' id='endpointListTogger_{{resource.id}}'
                         ng-click="Docs.toggleEndpointListForResource('{{resource.id}}');">Show/Hide</a>
                    </li>
                    <li>
                      <a href='#' ng-click="Docs.collapseOperationsForResource('{{resource.id}}');">
                        List Operations
                      </a>
                    </li>
                    <li>
                      <a href='#' ng-click="Docs.expandOperationsForResource('{{resource.id}}');">
                        Expand Operations
                      </a>
                    </li>
                    <li>
                      <a href='{{resource.url}}'>Raw</a>
                    </li>
                  </ul>
                </div>
              <ul class='endpoints' id='{{resource.id}}_endpoint_list'>
                <li class="endpoint">
                  <ul class='operations' ng-repeat="operation in resource.operationsArray">
                     <li class='{{operation.method}} operation' id='{{operation.parentId}}_{{operation.nickname}}'>
                      <div class='heading'>
                        <h3>
                          <span class='http_method'>
                          <a href='#/{{operation.parentId}}/{{operation.nickname}}' class="toggleOperation">{{operation.method}}</a>
                          </span>
                          <span class='path'>
                          <a href='#/{{operation.parentId}}/{{operation.nickname}}' class="toggleOperation">{{operation.path}}</a>
                          </span>
                        </h3>
                        <ul class='options'>
                          <li>
                          <a href='#/{{operation.parentId}}/{{operation.nickname}}' class="toggleOperation">{{operation.summary}}</a>
                          </li>
                        </ul>
                      </div>
                      <div class='content' id='{{operation.parentId}}_{{operation.nickname}}_content'>

                        <h4 ng-if="operation.notes">Implementation Notes</h4>
                        <p ng-if="operation.notes">{{operation.notes}}</p>
                      </div>
                    </li>
                  </ul>
                </li>
              </ul>
              </li>
            </ul>

            <!-- Footer TODO -->
        </div>
      </div>
    </div>
  </div>
</main>
