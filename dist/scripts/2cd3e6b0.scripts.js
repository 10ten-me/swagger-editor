"use strict";function annotateYAMLErrors(a){var b=null,c=a.getSession().getValue();try{jsyaml.load(c)}catch(d){return b=d.message.replace("JS-YAML: ",""),a.getSession().setAnnotations([{row:d.mark.line,column:d.mark.column,text:b,type:"error"}]),b}return a.getSession().clearAnnotations(),b}function annotateJSONErrors(a){var b=null,c=a.getSession().getValue(),d=0;try{jsonlint.parse(c)}catch(e){b=e.message;try{d=parseInt(b.split("\n")[0].replace("Parse error on line ","").replace(":",""),10)}catch(f){}return a.getSession().setAnnotations([{row:d,column:0,text:b,type:"error"}]),b}return a.getSession().clearAnnotations(),b}function buildDocs(a){swaggerUi&&(swaggerUi.load(a),swaggerUi.render())}function getJsonString(a,b){var c=null;return c="yaml"===b?JSON.stringify(jsyaml.load(a.getSession().getValue())):a.getSession().getValue()}window.PhonicsApp=angular.module("PhonicsApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.ace"]),PhonicsApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),PhonicsApp.controller("MainCtrl",["$scope",function(a){a.editor=null,a.editingLanguage="yaml",a.editorErrorMessage="",window.swaggerUi=new SwaggerUi({dom_id:"swagger-ui-container",supportedSubmitMethods:["get","post","put","delete"]}),a.aceLoaded=function(b){a.editor=b,buildDocs(getJsonString(a.editor,a.editingLanguage))},a.aceChanged=function(){var b=null;"yaml"===a.editingLanguage&&(b=annotateYAMLErrors(a.editor)),"json"===a.editingLanguage&&(b=annotateJSONErrors(a.editor)),b||(a.editorErrorMessage=""),buildDocs(getJsonString(a.editor,a.editingLanguage))},a.switchToLanguage=function(b){var c=a.editor.getSession().getValue(),d=null;if("yaml"===b){if(a.editorErrorMessage=annotateJSONErrors(a.editor),a.editorErrorMessage)return;d=JSON.parse(c),d=jsyaml.dump(d)}if("json"===b){if(a.editorErrorMessage=annotateYAMLErrors(a.editor),a.editorErrorMessage)return;d=jsyaml.load(c),d=JSON.stringify(d,null,2)}a.editorErrorMessage||(a.editingLanguage=b,a.editor.getSession().setMode(b),a.editor.getSession().setValue(d))}}]).directive("splitterBar",function(){return{template:"",replace:!1,restrict:"E",link:function(a,b,c){function d(a){b.css("left",a.pageX),$("#"+c.leftPane).css("width",a.pageX),$("#"+c.rightPane).css("width",window.innerWidth-a.pageX-b.width())}var e=$(document);b.on("mousedown",function(){e.on("mousemove",d),e.on("mouseup",function(){e.off("mousemove",d)})})}}});